<ng-container [formGroup]="subrowGroup">
  <table mat-table [dataSource]="subrowDataSource" formArrayName="subrowArray">
    <ng-container matColumnDef="{{innerColumn.name}}" *ngFor="let innerColumn of innerDisplayColumns">
      <th mat-header-cell *matHeaderCellDef [hidden]="!innerColumn.isVisible" mat-sort-header> {{innerColumn.displayName}} </th>
      <td mat-cell *matCellDef="let row; let rowIndex = index" [hidden]="!innerColumn.isVisible" [formGroupName]="rowIndex">
        <ng-container [ngSwitch]="innerColumn.propertyType" *ngIf="!innerColumn.isEditable">
          <ng-container *ngSwitchCase="'text'">{{row[innerColumn.name]}}</ng-container>
          <ng-container *ngSwitchCase="'number'">{{row[innerColumn.name]}}</ng-container>
        </ng-container>
        <ng-container [ngSwitch]="innerColumn.propertyType" *ngIf="innerColumn.isEditable">
          <mat-form-field floatLabel="never" *ngSwitchCase="'text'">
              <input matInput type="text" placeholder="{{innerColumn.displayName}}" [formControlName]="innerColumn.name">
          </mat-form-field>
          <mat-form-field floatLabel="never" *ngSwitchCase="'number'">
              <input matInput type="number" placeholder="{{innerColumn.displayName}}" [formControlName]="innerColumn.name">
          </mat-form-field>
        </ng-container>
      </td>
    </ng-container>
    <tr mat-header-row *matHeaderRowDef="innerDisplayColumnsProps"></tr>
    <tr mat-row *matRowDef="let rowElement; columns: innerDisplayColumnsProps"></tr>
  </table>
</ng-container>